<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>語言參數測試</title>
</head>
<body>
    <h1>語言參數測試</h1>
    <div id="results"></div>

    <script>
        // 模擬 URL 參數處理邏輯
        function testLanguageParameters() {
            const testCases = [
                {
                    name: "英文測試",
                    url: "?store_id=test123&store_name=Test%20Store&is_partner=false&preferred_lang=en"
                },
                {
                    name: "中文測試", 
                    url: "?store_id=test123&store_name=Test%20Store&is_partner=false&preferred_lang=zh-TW"
                },
                {
                    name: "日文測試",
                    url: "?store_id=test123&store_name=Test%20Store&is_partner=false&preferred_lang=ja"
                },
                {
                    name: "韓文測試",
                    url: "?store_id=test123&store_name=Test%20Store&is_partner=false&preferred_lang=ko"
                }
            ];

            const results = [];
            
            testCases.forEach(testCase => {
                // 模擬 URL 參數解析
                const urlParams = new URLSearchParams(testCase.url);
                const preferredLang = urlParams.get('preferred_lang');
                const language = preferredLang || 'zh-TW';
                
                // 語言代碼轉換
                const languageCodeMapping = {
                    'en': 'en-US',
                    'zh-TW': 'zh-TW', 
                    'ja': 'ja-JP',
                    'ko': 'ko-KR'
                };
                const normalizedLanguage = languageCodeMapping[language] || language;
                
                results.push({
                    test: testCase.name,
                    original: language,
                    normalized: normalizedLanguage,
                    expected: testCase.name.includes('英文') ? 'en-US' : 
                              testCase.name.includes('中文') ? 'zh-TW' :
                              testCase.name.includes('日文') ? 'ja-JP' :
                              testCase.name.includes('韓文') ? 'ko-KR' : 'zh-TW'
                });
            });
            
            return results;
        }

        // 顯示測試結果
        const results = testLanguageParameters();
        const resultsDiv = document.getElementById('results');
        
        results.forEach(result => {
            const div = document.createElement('div');
            div.style.margin = '10px 0';
            div.style.padding = '10px';
            div.style.border = '1px solid #ccc';
            div.style.borderRadius = '5px';
            
            const isCorrect = result.normalized === result.expected;
            div.style.backgroundColor = isCorrect ? '#d4edda' : '#f8d7da';
            
            div.innerHTML = `
                <h3>${result.test}</h3>
                <p><strong>原始語言代碼:</strong> ${result.original}</p>
                <p><strong>轉換後語言代碼:</strong> ${result.normalized}</p>
                <p><strong>預期結果:</strong> ${result.expected}</p>
                <p><strong>測試結果:</strong> <span style="color: ${isCorrect ? 'green' : 'red'}">${isCorrect ? '✅ 通過' : '❌ 失敗'}</span></p>
            `;
            
            resultsDiv.appendChild(div);
        });
    </script>
</body>
</html>
